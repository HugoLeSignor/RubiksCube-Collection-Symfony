{% extends 'base.html.twig' %}

{% block title %}Ma collection - Rubik's Cube Collection{% endblock %}

{% block body %}
<div class="container">
    <div class="card">
        <div class="flex-between mb-4">
            <h1 class="text-primary">üì¶ Ma Collection ({{ collections|length }} cubes)</h1>
            <a href="{{ path('app_rubiks_cube_index') }}" class="btn btn-primary">‚ûï Ajouter des cubes</a>
        </div>

        {% if collections|length > 0 %}
            <div class="collection-stats">
                <h3 class="mb-1">Statistiques de votre collection</h3>
                <p class="text-gray">
                    Vous poss√©dez {{ collections|length }} cube(s) diff√©rent(s).
                </p>
            </div>

            <div class="cube-grid">
                {% for collection in collections %}
                    <div class="cube-card">
                        {% if collection.rubiksCube.imageUrl %}
                            <div class="cube-image">
                                <img src="{{ collection.rubiksCube.imageUrl }}" alt="{{ collection.rubiksCube.name }}">
                            </div>
                        {% else %}
                            <div class="cube-placeholder">
                                üß©
                            </div>
                        {% endif %}
                        
                        <div class="cube-content">
                            <h3>{{ collection.rubiksCube.name }}</h3>
                            <span class="badge badge-type">{{ collection.rubiksCube.type }}</span>
                            
                            {% if collection.condition %}
                                <p>
                                    <strong>√âtat:</strong> {{ collection.condition }}
                                </p>
                            {% endif %}
                            
                            {% if collection.personalNote %}
                                <p>
                                    <strong>Note personnelle:</strong><br>
                                    {{ collection.personalNote }}
                                </p>
                            {% endif %}
                            
                            <p class="text-muted">
                                Ajout√© le {{ collection.addedAt|date('d/m/Y') }}
                            </p>
                            
                            <div class="cube-actions">
                                <a href="{{ path('app_rubiks_cube_show', {id: collection.rubiksCube.id}) }}" 
                                   class="btn btn-primary">
                                    Voir d√©tails
                                </a>
                                <form method="post" action="{{ path('app_collection_remove', {id: collection.id}) }}" 
                                      onsubmit="return confirm('√ätes-vous s√ªr de vouloir retirer ce cube de votre collection ?');"
                                      style="display: inline;">
                                    <button type="submit" class="btn btn-danger">üóëÔ∏è Retirer</button>
                                </form>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="collection-empty">
                <div class="empty-icon">üì≠</div>
                <h2 class="text-gray mb-2">Votre collection est vide</h2>
                <p class="text-dark-gray mb-4">
                    Commencez √† construire votre collection en ajoutant vos premiers Rubik's Cubes !
                </p>
                <a href="{{ path('app_rubiks_cube_index') }}" class="btn btn-black">
                    D√©couvrir les cubes
                </a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
